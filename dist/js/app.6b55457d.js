(function(){"use strict";var t={9622:function(t,e,a){var s=a(7195),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("MyHeader",{staticStyle:{"padding-top":"4rem"}}),e("router-view")],1)},i=[],o={name:"App",beforeCreate(){this.$store.commit("initializeStore"),this.$store.dispatch("fetchData");const t=localStorage.getItem("token");t&&this.$store.dispatch("fetchUser")},mounted(){},methods:{}},n=o,l=a(1001),c=(0,l.Z)(n,r,i,!1,null,null,null),d=c.exports,u=a(2241),m=(a(560),a(408));s.ZP.use(m.ZP);var p=new m.ZP.Store({state:{baseUrl:"http://127.0.0.1:5000",isAuthenticated:!1,token:"",categories:[],user:{},admin:{},carts:[],purchases:[],flashMessage:""},getters:{},mutations:{initializeStore(t){let e=localStorage.getItem("token");e?(t.token=e,t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},setToken(t,e){t.token=e,t.isAuthenticated=!0},removeToken(t){t.token="",t.isAuthenticated=!1},setCategories(t,e){t.categories=e},setUser(t,e){t.user=e},setAdmin(t,e){t.admin=e},setCart(t){t.carts=t.user.carts},setPurchases(t){t.purchases=t.user.purchases}},actions:{fetchData({state:t,commit:e}){fetch(`${t.baseUrl}/api/categories`,{method:"GET"}).then((t=>t.json())).then((t=>{e("setCategories",t)}))},loginUser({state:t,commit:e},a){fetch(`${t.baseUrl}/login?include_auth_token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>t.json())).then((a=>{if(400==a.meta.code)t.flashMessage=a.response.errors[0];else{const t=a.response.user.authentication_token;e("setToken",t),localStorage.setItem("token",t),this.dispatch("fetchUser"),this.dispatch("fetchAdmin"),B.push("/")}})).catch((t=>console.error(t)))},logoutUser({state:t,commit:e}){fetch(`${t.baseUrl}/logout`,{method:"POST",headers:{"Content-Type":"application/json","Authentication-Token":t.token}}).catch((t=>console.error(t))),localStorage.clear(),e("removeToken"),B.go()},fetchUser({state:t,commit:e}){fetch(`${t.baseUrl}/api/getuser`,{method:"GET",headers:{"Authentication-Token":t.token}}).then((t=>t.json())).then((t=>{e("setUser",t),e("setCart"),e("setPurchases")}))},fetchAdmin({state:t,commit:e}){fetch(`${t.baseUrl}/api/admin`,{method:"GET",headers:{"Authentication-Token":t.token}}).then((t=>t.json())).then((t=>{e("setAdmin",t)}))},deleteCart({state:t},e){fetch(`${t.baseUrl}/api/cart/${e}`,{method:"DELETE",headers:{"Authentication-Token":t.token}}).then((t=>t.json())).then((e=>{e.message&&(t.flashMessage=e.message,this.dispatch("fetchUser"))}))},buyNow({state:t},e){console.log(e),fetch(`${t.baseUrl}/api/addpurchase`,{method:"POST",headers:{"Content-Type":"application/json","Authentication-Token":t.token},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{console.log(e),e.message&&(t.flashMessage=e.message),this.dispatch("fetchData"),this.dispatch("fetchUser")}))},deleteCategory({state:t},e){confirm("Are you sure you want to delete?")&&fetch(`${t.baseUrl}/api/category/${e}`,{method:"DELETE",headers:{"Authentication-Token":t.token}}).then((t=>t.json())).then((e=>{e.message&&(t.flashMessage=e.message),this.dispatch("fetchData"),this.dispatch("fetchAdmin")}))}},modules:{}}),g=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"1rem"}},[t.user.roles&&"admin"===t.user.roles[0].name?e("div",{staticClass:"mb-2",attrs:{align:"right"}},[e("a",{staticClass:"btn btn-dark",attrs:{href:"/admin"}},[t._v("Approvals")])]):t._e(),e("div",{staticClass:"container",attrs:{align:"center"}},[""!=t.flashMessage?e("div",{key:t.flashMessage,staticClass:"alert alert-warning alert-dismissible fade show col-md-5",attrs:{role:"alert"}},[t._v(" "+t._s(t.flashMessage)+" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:t.clearFlashMessage}})]):t._e()]),0==t.categories.length?e("div",[e("p",[t._v("No Categories or Products are available")]),t.user.roles&&"manager"===t.user.roles[0].name?e("button",{staticClass:"btn btn-primary"},[t._v("Add")]):t._e()]):t._e(),e("div",t._l(t.categories,(function(a){return e("div",{key:a.id},[e("div",{staticClass:"card mb-2"},[e("div",{staticClass:"card-body text-center"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"d-flex"},[e("h2",{staticClass:"card-title me-2"},[t._v(t._s(a.name))]),t.user.roles&&["manager","admin"].includes(t.user.roles[0].name)?e("div",[e("button",{staticClass:"btn btn-warning me-1",attrs:{"data-bs-toggle":"modal","data-bs-target":`#editCategory${a.id}`}},[e("i",{staticClass:"bi bi-pencil-square"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteCategory(a.id)}}},[e("i",{staticClass:"bi bi-trash3"})]),e("EditCategory",{attrs:{categoryData:a}})],1):t._e()]),t.user.roles&&"manager"===t.user.roles[0].name?e("div",[e("button",{staticClass:"btn btn-primary",attrs:{"data-bs-toggle":"modal","data-bs-target":`#addProduct${a.id}`}},[t._v("Add Product "),e("i",{staticClass:"bi bi-plus-circle"})]),e("AddProduct",{attrs:{category_id:a.id}})],1):t._e()]),0==a.products.length?e("div",[e("p",[t._v("No Products are availbale")])]):t._e(),e("div",{staticClass:"d-flex flex-row flex-nowrap overflow-auto"},t._l(a.products,(function(a){return e("div",{key:a.id},[e("div",{staticClass:"card me-1"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-center"},[e("h4",{staticClass:"card-title me-2"},[t._v(t._s(a.name))]),e("small",{staticClass:"align-self-center mb-2"},[e("b",[t._v("("),e("i",{staticClass:"bi bi-currency-rupee"}),t._v(t._s(a.price)+"/"+t._s(a.unit)+")")])])]),e("p",{staticClass:"card-text"},[t._v("Expriy: "+t._s(a.expiry))]),e("p",{staticClass:"card-text align-self-center"},[t._v("Availability: "+t._s(a.availability))]),!t.isAuthenticated||t.user.roles&&"user"===t.user.roles[0].name?e("div",[e("div",{attrs:{align:"center"}},[e("div",{staticClass:"input-group",staticStyle:{width:"6rem"}},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text hover",on:{click:function(e){return t.decrementValue(a)}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"product.quantity"}],staticClass:"form-control form-control-sm text-center",attrs:{type:"text"},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text hover",on:{click:function(e){return t.incrementValue(a)}}},[t._v("+")])])])]),e("div",{staticClass:"mt-3"},[e("button",{staticClass:"btn btn-warning me-2",on:{click:function(e){return t.addToCart(a)}}},[t._v("Add to cart")]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.buyNow(a)}}},[t._v("Buy Now")])])]):t._e(),t.user.roles&&"manager"===t.user.roles[0].name?e("div",[e("button",{staticClass:"btn btn-warning me-1",attrs:{"data-bs-toggle":"modal","data-bs-target":`#editProduct${a.id}`}},[e("i",{staticClass:"bi bi-pencil-square"})]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteProduct(a.id)}}},[e("i",{staticClass:"bi bi-trash3"})]),e("EditProduct",{attrs:{productData:a}})],1):t._e()])])])})),0)])])])})),0)])},h=[],v={name:"HomeView",data(){return{}},mounted(){},computed:{...(0,m.rn)(["categories","flashMessage","user","isAuthenticated"])},methods:{async addToCart(t){if(this.$store.state.isAuthenticated){const e=await fetch(`${this.$store.state.baseUrl}/api/addtocart/${t.id}`,{method:"POST",headers:{"Content-Type":"application/json","Authentication-Token":localStorage.getItem("token")},body:JSON.stringify({product_id:t.id,quantity:t.quantity})}),a=await e.json();a.message&&(this.$store.state.flashMessage=a.message),this.$store.dispatch("fetchUser")}else this.$router.push("/login")},buyNow(t){if(this.$store.state.isAuthenticated){if(confirm(`Are you sure you want to buy ${t.name} of quantity ${t.quantity}`)){const e={product_id:t.id,quantity:t.quantity};this.$store.dispatch("buyNow",e)}}else this.$router.push("/login")},clearFlashMessage(){this.$store.state.flashMessage=""},incrementValue(t){t.quantity++},decrementValue(t){t.quantity>1&&t.quantity--},deleteProduct(t){confirm("Are you sure you want to delete?")&&fetch(`${this.$store.state.baseUrl}/api/product/${t}`,{method:"DELETE",headers:{"Authentication-Token":this.$store.state.token}}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchData")}))},deleteCategory(t){this.$store.getters.deleteCategory(t)}}},f=v,b=(0,l.Z)(f,g,h,!1,null,"5d3a8c1a",null),y=b.exports,C=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container-fluid",staticStyle:{"padding-top":"8rem"},attrs:{align:"center"}},[""!=t.flashMessage?e("div",{key:t.flashMessage,staticClass:"alert alert-warning alert-dismissible fade show col-md-3",attrs:{role:"alert"}},[t._v(" "+t._s(t.flashMessage)+" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:t.clearFlashMessage}})]):t._e(),t.show?e("div",[e("h2",[t._v("Welcome")]),e("form",{staticClass:"col-md-3 mx-auto",attrs:{id:"login"},on:{submit:t.loginUser}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control mb-2",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control mb-2",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Login")])]),e("small",[t._v("Don't have an account? "),e("a",{staticClass:"link hover",on:{click:t.toggleLogin}},[t._v("Sign Up")])])]):e("div",[e("h2",[t._v("Welcome")]),e("form",{staticClass:"col-md-3 mx-auto",attrs:{id:"signup"},on:{submit:t.signupUser}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role,expression:"user.role"}],staticClass:"form-select mb-2",attrs:{"aria-label":"Default select example"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"user",selected:""}},[t._v("User")]),e("option",{attrs:{value:"manager"}},[t._v("Manager")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control mb-2",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control mb-2",attrs:{placeholder:"Username",required:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control mb-2",attrs:{placeholder:"Name",required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control mb-2",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control mb-2",attrs:{type:"password",placeholder:"Confirm Password",required:""},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}}),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Sign Up")])]),e("small",[t._v("Already have an account? "),e("a",{staticClass:"link hover",on:{click:t.toggleLogin}},[t._v("Log In")])])])])])},_=[],w={name:"LoginView",data(){return{show:!0,user:{email:"",username:"",name:"",password:"",confirmPassword:"",role:"user"}}},mounted(){},computed:{flashMessage(){return this.$store.state.flashMessage}},methods:{clearFlashMessage(){this.$store.state.flashMessage=""},loginUser(t){t.preventDefault(),localStorage.clear();const e={email:this.user.email,password:this.user.password};this.$store.dispatch("loginUser",e)},signupUser(t){t.preventDefault(),fetch(`${this.$store.state.baseUrl}/api/adduser`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.user)}).then((t=>t.json())).then((t=>{t.message?this.$store.state.flashMessage=t.message:this.$store.state.flashMessage="Sign up Successful. Please Login",this.toggleLogin()})).catch((t=>console.error(t)))},toggleLogin(){this.show=!this.show,this.user.email="",this.user.username="",this.user.name="",this.user.password="",this.user.confirmPassword="",this.user.role="user"}}},P=w,x=(0,l.Z)(P,C,_,!1,null,"7513dec6",null),$=x.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"1rem"}},[0==t.carts.length?e("div",[t._m(0)]):e("div",{staticClass:"container-fluid d-flex justify-content-between",attrs:{align:"left"}},[e("div",{staticClass:"w-75"},t._l(t.carts,(function(a){return e("div",{key:a.id,staticClass:"card mb-2",attrs:{align:"left"}},[e("div",{staticClass:"d-flex justify-content-between",staticStyle:{margin:"2rem"}},[e("div",[e("h4",{},[t._v(t._s(t.getCategory(a.product_id).name)+" - "+t._s(t.getProduct(a.product_id).name)+" ")]),e("p",[t._v("Rs."+t._s(t.getProduct(a.product_id).price)+"/"+t._s(t.getProduct(a.product_id).unit))]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"input-group",staticStyle:{width:"6rem"}},[e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text hover",on:{click:function(e){return t.decrementValue(a)}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"cart.quantity"}],staticClass:"form-control form-control-sm text-center",attrs:{type:"text"},domProps:{value:a.quantity},on:{input:function(e){e.target.composing||t.$set(a,"quantity",e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text hover",on:{click:function(e){return t.incrementValue(a)}}},[t._v("+")])])]),e("button",{staticClass:"btn btn-link link-danger",on:{click:function(e){return t.deleteCart(a.id)}}},[e("i",{staticClass:"bi bi-trash3"})])])]),e("div",{staticClass:"align-self-center d-flex"},[e("i",{staticClass:"bi bi-currency-rupee"}),e("h4",[t._v(t._s(t.getPrice(a)))])])])])})),0),e("div",{staticClass:"card w-25 ms-3 position-fixed end-0 me-2",attrs:{id:"totalPrice"}},[e("div",{staticStyle:{margin:"1rem"},attrs:{align:"center"}},[e("h4",[t._v("Total Payable Amount")]),e("h6",[t._v("Subtotal:"),e("b",[e("i",{staticClass:"bi bi-currency-rupee"}),t._v(t._s(t.getTotalPrice))])]),e("button",{staticClass:"btn btn-warning w-100",on:{click:function(e){return t.buyAll()}}},[t._v("Proceed to Buy")])])])])])},A=[function(){var t=this,e=t._self._c;return e("p",[t._v("No products available in the cart. "),e("a",{attrs:{href:"/"}},[t._v("Continue Shopping")])])}],T={name:"CartView",data(){return{flashMessage:""}},computed:{...(0,m.rn)(["carts","categories"]),getTotalPrice(){return this.carts.reduce(((t,e)=>{const a=this.getProduct(e.product_id),s=e.quantity*a.price;return t+s}),0).toFixed(2)}},methods:{getCategory(t){const e=this.categories.find((e=>e.products.some((e=>e.id===t))));return e},getProduct(t){const e=this.getCategory(t);if(e){const a=e.products.find((e=>e.id===t));return a}},getPrice(t){const e=t.quantity,a=this.getProduct(t.product_id);return(e*a.price).toFixed(2)},incrementValue(t){t.quantity++},decrementValue(t){t.quantity>1&&t.quantity--},deleteCart(t){this.$store.dispatch("deleteCart",t)},buyAll(){confirm("Are you sure you want to buy all products")&&this.carts.forEach((t=>{const e={product_id:t.product_id,quantity:t.quantity};console.log(t),this.$store.dispatch("buyNow",e),this.deleteCart(t.id)}))}}},M=T,N=(0,l.Z)(M,k,A,!1,null,"31fbee52",null),U=N.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"1rem"}},[e("h2",{staticClass:"text-start ms-2 mb-3"},[t._v("My Purchases")]),0==t.purchases.length?e("div",[t._m(0)]):e("div",{staticClass:"container"},[e("div",{staticClass:"row row-cols-1 row-cols-md-2 g-4"},t._l(t.purchases,(function(a){return e("div",{key:a.id,staticClass:"col"},[e("div",{staticClass:"card mb-2 text-start"},[e("div",{staticClass:"card-body d-flex justify-content-between"},[e("div",[e("div",{staticClass:"d-flex"},[e("h4",{staticClass:"card-title me-2"},[t._v(t._s(t.getCategory(a.product_id).name)+" - "+t._s(t.getProduct(a.product_id).name))]),e("small",{staticClass:"align-self-center mb-2"},[t._v("("+t._s(a.quantity)+" units)")])]),e("div",[e("p",{staticClass:"card-text"},[t._v("Rs."+t._s(t.getProduct(a.product_id).price)+"/"+t._s(t.getProduct(a.product_id).unit))])])]),e("div",{staticClass:"align-self-center d-flex"},[e("i",{staticClass:"bi bi-currency-rupee"}),e("h4",[t._v(t._s(t.getPrice(a)))])])]),e("div",{staticClass:"card-footer"},[t._v(" "+t._s(a.purchased_at)+" ")])])])})),0)])])},j=[function(){var t=this,e=t._self._c;return e("p",[t._v("No purchases available. "),e("a",{attrs:{href:"/"}},[t._v("Keep shopping")])])}],q={name:"PurchaseView",data(){return{}},computed:{...(0,m.rn)(["purchases","categories"])},methods:{getCategory(t){const e=this.categories.find((e=>e.products.some((e=>e.id===t))));return e},getProduct(t){const e=this.getCategory(t);if(e){const a=e.products.find((e=>e.id===t));return a}},getPrice(t){const e=t.quantity,a=this.getProduct(t.product_id);return(e*a.price).toFixed(2)}}},D=q,E=(0,l.Z)(D,S,j,!1,null,null,null),O=E.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{margin:"1rem"}},[e("div",{staticClass:"container",attrs:{align:"center"}},[""!=t.flashMessage?e("div",{key:t.flashMessage,staticClass:"alert alert-warning alert-dismissible fade show col-md-5",attrs:{role:"alert"}},[t._v(" "+t._s(t.flashMessage)+" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:t.clearFlashMessage}})]):t._e()]),e("div",{staticClass:"d-flex justify-content-between",attrs:{align:"center"}},[e("div",{staticClass:"container-fluid",attrs:{id:"pendingManagers"}},[e("h4",{staticClass:"mb-2"},[t._v("Pending Managers")]),e("div",{staticClass:"row row-cols-1 row-cols-md-2 g-4"},[e("div",{staticClass:"col"},t._l(t.admin.pending_managers,(function(a){return e("div",{key:a.id,staticClass:"card me-4",staticStyle:{width:"18rem"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-text text-start"},[e("p",[t._v("Email: "+t._s(a.email))]),e("p",[t._v("Username: "+t._s(a.username))]),e("p",[t._v("Name: "+t._s(a.name))])]),e("button",{staticClass:"btn btn-success me-2",on:{click:function(e){return t.approveManager(a.id)}}},[t._v("Approve")]),e("button",{staticClass:"btn btn-danger"},[t._v("Deny")])])])})),0)])]),e("div",{staticClass:"container-fluid",attrs:{id:"pendingCategories"}},[e("h4",{staticClass:"mb-2"},[t._v("Pending Categories")]),e("div",{staticClass:"row row-cols-1 row-cols-md-2 g-4"},t._l(t.admin.pending_categories,(function(a){return e("div",{key:a.id,staticClass:"card me-4",staticStyle:{width:"18rem"}},[e("div",{staticClass:"col"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-text text-start"},[e("p",[t._v("Name: "+t._s(a.name))]),e("p",[t._v("Comments: "+t._s(a.comments))])]),e("button",{staticClass:"btn btn-success me-2",on:{click:function(e){return t.approveCategory(a)}}},[t._v("Approve")]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteCategory(a.id)}}},[t._v("Deny")])])])])})),0)])])])},Z=[],V={name:"AdminView",data(){return{}},mounted(){this.$store.dispatch("fetchAdmin")},computed:{...(0,m.rn)(["admin","flashMessage"])},methods:{approveManager(t){fetch(`${this.$store.state.baseUrl}/api/user/${t}`,{method:"PUT",headers:{"Authentication-Token":this.$store.state.token}}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchAdmin")}))},approveCategory(t){fetch(`${this.$store.state.baseUrl}/api/category/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json","Authentication-Token":this.$store.state.token},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t.message?this.$store.state.flashMessage=t.message:this.$store.state.flashMessage="",this.$store.dispatch("fetchData"),this.$store.dispatch("fetchAdmin")}))},deleteCategory(t){this.$store.dispatch("deleteCategory",t)},clearFlashMessage(){this.$store.state.flashMessage=""}}},H=V,I=(0,l.Z)(H,L,Z,!1,null,null,null),F=I.exports;s.ZP.use(u.ZP);const z=[{path:"/",name:"home",component:y},{path:"BigMarket-Frontend/dist/login",name:"LoginView",component:$},{path:"/cart",name:"CartView",component:U,meta:{requireLogin:!0}},{path:"/purchases",name:"PurchaseView",component:O,meta:{requireLogin:!0}},{path:"/admin",name:"AdminView",component:F,meta:{requireLogin:!0}}],J=new u.ZP({mode:"history",base:"/",routes:z});J.beforeEach(((t,e,a)=>{setTimeout((()=>{t.matched.some((t=>t.meta.requireLogin))&&!p.state.isAuthenticated?a("/login"):a()}),"0.1")}));var B=J,G=a(4337);(0,G.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var R=function(){var t=this,e=t._self._c;return e("div",[e("nav",{staticClass:"navbar navbar-expand-lg text-bg-dark fixed-top",attrs:{"data-bs-theme":"dark"}},[e("div",{staticClass:"container-fluid"},[e("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("Big Market")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo02"}},[e("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[e("li",{staticClass:"nav-item"},[t._v(" "+t._s(t.user.username)+" ")])]),t.$store.state.isAuthenticated?e("div",{staticClass:"d-flex justify-content-end"},[t.user.roles&&["admin","manager"].includes(t.user.roles[0].name)?e("div",{staticClass:"me-2"},[e("button",{staticClass:"btn btn-info",attrs:{"data-bs-toggle":"modal","data-bs-target":"#addCategory"}},[t._v("Add Category")]),e("AddCategory")],1):t._e(),t._m(1),t.user.roles&&"user"==t.user.roles[0].name?e("div",{staticClass:"me-2"},[e("a",{staticClass:"position-relative",attrs:{href:"/cart"}},[e("svg",{staticClass:"bi bi-cart4 text-light",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"}})]),0!=t.carts.length?e("span",{staticClass:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",staticStyle:{"font-size":"9px"}},[t._v(" "+t._s(t.carts.length)+" ")]):t._e()])]):t._e(),e("div",[t.user.roles&&"user"===t.user.roles[0].name?e("a",{staticClass:"btn",attrs:{href:"/purchases"}},[t._v("Orders")]):t._e(),e("button",{staticClass:"btn btn-danger",on:{click:t.logoutUser}},[t._v("Log Out")])])]):e("div",[e("a",{staticClass:"btn btn-info",attrs:{href:"/login",role:"button"}},[t._v("Log In")])])])])])])},W=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t._self._c;return e("form",{staticClass:"d-flex me-2 w-50",attrs:{role:"search"}},[e("div",{staticClass:"input-group"},[e("input",{staticClass:"form-control",attrs:{type:"search",placeholder:"Search","aria-label":"Search","aria-describedby":"button-addon2"}}),e("button",{staticClass:"btn btn-warning",attrs:{type:"submit",id:"button-addon2"}},[e("i",{staticClass:"bi bi-search"})])])])}],K={name:"MyHeader",data(){return{}},computed:{...(0,m.rn)(["user","carts"])},methods:{...(0,m.nv)(["logoutUser"])}},Q=K,X=(0,l.Z)(Q,R,W,!1,null,"6fb03d7f",null),Y=X.exports,tt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:`addProduct${this.category_id}`,tabindex:"-1","aria-labelledby":"addProductLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}}),e("label",{attrs:{for:"floatingInput"}},[t._v("Name")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.expiry,expression:"product.expiry"}],staticClass:"form-control",attrs:{type:"date",placeholder:"Expiry"},domProps:{value:t.product.expiry},on:{input:function(e){e.target.composing||t.$set(t.product,"expiry",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Expiry")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.price,expression:"product.price"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Price"},domProps:{value:t.product.price},on:{input:function(e){e.target.composing||t.$set(t.product,"price",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Price")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.unit,expression:"product.unit"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Unit"},domProps:{value:t.product.unit},on:{input:function(e){e.target.composing||t.$set(t.product,"unit",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Unit")])]),e("div",{staticClass:"form-floating"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.availability,expression:"product.availability"}],staticClass:"form-control",attrs:{type:"integer",placeholder:"Availability"},domProps:{value:t.product.availability},on:{input:function(e){e.target.composing||t.$set(t.product,"availability",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Availability")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.addProduct}},[t._v("Add")])])])])])])},et=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"addProductLabel"}},[t._v("Add Product")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],at={name:"AddProduct",props:["category_id"],data(){return{product:{name:"",expiry:"",price:"",unit:"",availability:"",category_id:this.category_id}}},methods:{addProduct(){fetch(`${this.$store.state.baseUrl}/api/addproduct`,{method:"POST",headers:{"Content-Type":"application/json","Authentication-Token":this.$store.state.token},body:JSON.stringify(this.product)}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchData"),this.product={name:"",expiry:"",price:"",unit:"",availability:"",category_id:this.category_id}}))}}},st=at,rt=(0,l.Z)(st,tt,et,!1,null,null,null),it=rt.exports,ot=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:`editProduct${this.productData.id}`,tabindex:"-1","aria-labelledby":"editProductLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}}),e("label",{attrs:{for:"floatingInput"}},[t._v("Name")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.expiry,expression:"product.expiry"}],staticClass:"form-control",attrs:{type:"date",placeholder:"Expiry"},domProps:{value:t.product.expiry},on:{input:function(e){e.target.composing||t.$set(t.product,"expiry",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Expiry")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.price,expression:"product.price"}],staticClass:"form-control",attrs:{type:"float",placeholder:"Price"},domProps:{value:t.product.price},on:{input:function(e){e.target.composing||t.$set(t.product,"price",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Price")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.unit,expression:"product.unit"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Unit"},domProps:{value:t.product.unit},on:{input:function(e){e.target.composing||t.$set(t.product,"unit",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Unit")])]),e("div",{staticClass:"form-floating mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.availability,expression:"product.availability"}],staticClass:"form-control",attrs:{type:"integer",placeholder:"Availability"},domProps:{value:t.product.availability},on:{input:function(e){e.target.composing||t.$set(t.product,"availability",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Availability")])]),e("div",{staticClass:"form-floating"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.category_id,expression:"product.category_id"}],staticClass:"form-control",attrs:{type:"integer",placeholder:"Category Id"},domProps:{value:t.product.category_id},on:{input:function(e){e.target.composing||t.$set(t.product,"category_id",e.target.value)}}}),e("label",{attrs:{for:"floatingPassword"}},[t._v("Category Id")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.editProduct}},[t._v("Update")])])])])])])},nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"editProductLabel"}},[t._v("Edit Product")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],lt={name:"EditProduct",props:["productData"],data(){return{product:{name:this.productData.name,expiry:this.productData.expiry.split("T")[0],price:this.productData.price,unit:this.productData.unit,availability:this.productData.availability,category_id:this.productData.category_id}}},methods:{editProduct(){fetch(`${this.$store.state.baseUrl}/api/product/${this.productData.id}`,{method:"PUT",headers:{"Content-Type":"application/json","Authentication-Token":this.$store.state.token},body:JSON.stringify(this.product)}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchData")}))}}},ct=lt,dt=(0,l.Z)(ct,ot,nt,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:"addCategory",tabindex:"-1","aria-labelledby":"addCategoryLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-floating mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",id:"floatingInput",placeholder:"Name"},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}}),e("label",{attrs:{for:"floatingInput"}},[t._v("Name")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.addCategory}},[t._v("Add")])])])])])])},pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"addCategoryLabel"}},[t._v("Add Category")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],gt={name:"AddCategory",data(){return{category:{name:""}}},methods:{addCategory(){fetch(`${this.$store.state.baseUrl}/api/addcategory`,{method:"POST",headers:{"Content-Type":"application/json","Authentication-Token":this.$store.state.token},body:JSON.stringify(this.category)}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchData"),this.category={name:""}}))}}},ht=gt,vt=(0,l.Z)(ht,mt,pt,!1,null,"c3672e60",null),ft=vt.exports,bt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"modal fade",attrs:{id:`editCategory${this.categoryData.id}`,tabindex:"-1","aria-labelledby":"editCategoryLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-floating mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.category.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text",id:"floatingInput",placeholder:"Name"},domProps:{value:t.category.name},on:{input:function(e){e.target.composing||t.$set(t.category,"name",e.target.value)}}}),e("label",{attrs:{for:"floatingInput"}},[t._v("Name")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:t.editCategory}},[t._v("Update")])])])])])])},yt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h1",{staticClass:"modal-title fs-5",attrs:{id:"editCategoryLabel"}},[t._v("Edit Category")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],Ct={name:"EditCategory",props:["categoryData"],data(){return{category:{name:this.categoryData.name}}},methods:{editCategory(){fetch(`${this.$store.state.baseUrl}/api/category/${this.categoryData.id}`,{method:"PUT",headers:{"Content-Type":"application/json","Authentication-Token":this.$store.state.token},body:JSON.stringify(this.category)}).then((t=>t.json())).then((t=>{t.message&&(this.$store.state.flashMessage=t.message),this.$store.dispatch("fetchData")}))}}},_t=Ct,wt=(0,l.Z)(_t,bt,yt,!1,null,"0b425dc8",null),Pt=wt.exports;s.ZP.config.productionTip=!1,s.ZP.component("MyHeader",Y),s.ZP.component("AddProduct",it),s.ZP.component("EditProduct",ut),s.ZP.component("AddCategory",ft),s.ZP.component("EditCategory",Pt),new s.ZP({router:B,store:p,render:t=>t(d)}).$mount("#app")}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var o=1/0;for(d=0;d<t.length;d++){s=t[d][0],r=t[d][1],i=t[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,o=s[0],n=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var d=l(a)}for(e&&e(s);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(9622)}));s=a.O(s)})();
//# sourceMappingURL=app.6b55457d.js.map